{% if site.toggle_color_scheme and site.toggle_color_scheme != "nil"  %}

  {% if site.toggle_page_url and site.toggle_page_url != "nil" 
      and site.toggle_page_url != page.url %}
    {% assign toggle_display = "style='display: none'" %}
  {% else %}
    {% assign toggle_display = "" %}
  {% endif %}

  {% if site.toggle_text_1 %}
    {% assign toggle_text_1 = site.toggle_text_1 %}
  {% else %}
    {% assign toggle_text_1 = "-> Return to the Dark Side" %}
  {% endif %}

  {% if site.toggle_text_2 %}
    {% assign toggle_text_2 = site.toggle_text_2 %}
  {% else %}
    {% assign toggle_text_2 = "-> Color-Blind-Friendly Light Mode" %}
  {% endif %}

  <button id="theme-toggle" onclick="modeSwitcher()" 
  type="button" name="button" class="btn theme-toggle" {{ toggle_display }}></button>

  <script>
    function modeSwitcher() {
      let currentMode = document.documentElement.getAttribute('data-theme');
      if (currentMode === "dark") {
        document.documentElement.setAttribute('data-theme', 'light');
        window.localStorage.setItem('theme', 'light');
        document.getElementById("theme-toggle").innerHTML = "{{ toggle_text_1 }}";
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        window.localStorage.setItem('theme', 'dark');
        document.getElementById("theme-toggle").innerHTML = "{{ toggle_text_2 }}";
      }
    }
  </script>

{% endif %}